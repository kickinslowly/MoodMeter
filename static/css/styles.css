:root {
  --bg: #0f0f12;
  --text: #e6e6ea;
  --muted: #a0a3ad;
  --axis: #cfd3dc;
  --cell-border: rgba(255,255,255,0.1);
  --hover-outline: rgba(255,255,255,0.6);
  --selected-outline: #ffffff;
  --shadow: 0 10px 25px rgba(0,0,0,0.35);
}

html, body {
  height: 100%;
}

body {
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans, "Apple Color Emoji", "Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 50% -10%, #1b1c22 0%, #0f1014 60%, #0a0b0e 100%);
  color: var(--text);
}

.page { min-height: 100%; display: flex; flex-direction: column; }
.header { padding: 20px 24px 8px; text-align: center; position: relative; }
.title { margin: 0; font-size: clamp(20px, 3vw, 32px); letter-spacing: .4px; color: #f7f7fb; }

.main { flex: 1; display: grid; place-items: center; padding: 16px; }

.axes-layout {
  display: grid;
  grid-template-columns: auto minmax(240px, 78vw) auto;
  grid-template-rows: auto minmax(240px, 78vh) auto;
  gap: 12px 16px;
  align-items: center;
  justify-items: center;
  width: 100%;
  max-width: 1200px;
}

.y-axis-label {
  grid-column: 1;
  grid-row: 2;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}

.y-axis-label.y-bottom {
  grid-column: 3;
  grid-row: 2;
  transform: none;
  writing-mode: vertical-rl;
}

.grid-wrapper {
  grid-column: 2;
  grid-row: 2;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.grid {
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-rows: repeat(10, 1fr);
  grid-template-columns: repeat(10, 1fr);
  gap: 6px;
  /* Use a custom property for padding so quadrant lines align on all sizes */
  --grid-pad: 12px;
  padding: var(--grid-pad);
  border-radius: 16px;
  background: rgba(255,255,255,0.05);
  box-shadow: var(--shadow);
  position: relative;
}

/* Quadrant separator lines */
.grid::before,
.grid::after {
  content: "";
  position: absolute;
  pointer-events: none;
  background: rgba(255,255,255,0.22); /* thin, mostly transparent */
  z-index: 1; /* above default cells, below hovered/selected cells */
}
/* Horizontal center line */
.grid::before {
  left: var(--grid-pad);
  right: var(--grid-pad);
  top: 50%;
  height: 1px;
  transform: translateY(-0.5px);
}
/* Vertical center line */
.grid::after {
  top: var(--grid-pad);
  bottom: var(--grid-pad);
  left: 50%;
  width: 1px;
  transform: translateX(-0.5px);
}

.row { display: contents; }

.cell {
  appearance: none;
  border: 1px solid var(--cell-border);
  background: #22242b;
  border-radius: 10px;
  color: #f8f8fb;
  font-size: clamp(10px, 1.3vw, 14px);
  font-weight: 600;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  line-height: 1.15;
  transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 200ms ease, filter 200ms ease;
  position: relative;
  overflow: hidden;
}

.cell::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 0 0 0px transparent;
  transition: box-shadow 120ms ease;
}

.cell:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  border-color: var(--hover-outline);
  z-index: 2;
}

.cell:hover::after {
  box-shadow: inset 0 0 0 2px var(--hover-outline);
}

.cell.selected {
  border-color: var(--selected-outline);
  box-shadow: 0 0 0 2px var(--selected-outline), 0 8px 20px rgba(0,0,0,0.45);
  transform: translateY(-1px) scale(1.02);
  z-index: 3;
}

.cell-label { pointer-events: none; padding: 6px; }

.x-axis {
  margin-top: 10px;
  width: 100%;
  display: flex;
  justify-content: space-between;
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}

/* Accessibility focus */
.cell:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }

/* Thin white outline for center words of each quadrant */
.grid .cell[data-cell-label="Angry" i],
.grid .cell[data-cell-label="Happy" i],
.grid .cell[data-cell-label="Calm" i],
.grid .cell[data-cell-label="Sad" i],
.grid .cell[data-label="Angry" i],
.grid .cell[data-label="Happy" i],
.grid .cell[data-label="Calm" i],
.grid .cell[data-label="Sad" i] {
  position: relative; /* ensure ::after positions correctly */
}

.grid .cell[data-cell-label="Angry" i]::after,
.grid .cell[data-cell-label="Happy" i]::after,
.grid .cell[data-cell-label="Calm" i]::after,
.grid .cell[data-cell-label="Sad" i]::after,
.grid .cell[data-label="Angry" i]::after,
.grid .cell[data-label="Happy" i]::after,
.grid .cell[data-label="Calm" i]::after,
.grid .cell[data-label="Sad" i]::after {
  box-shadow: inset 0 0 0 1.5px rgba(255,255,255,0.9);
}

/* Keep the white ring visible on hover alongside the hover outline */
.grid .cell[data-cell-label="Angry" i]:hover::after,
.grid .cell[data-cell-label="Happy" i]:hover::after,
.grid .cell[data-cell-label="Calm" i]:hover::after,
.grid .cell[data-cell-label="Sad" i]:hover::after,
.grid .cell[data-label="Angry" i]:hover::after,
.grid .cell[data-label="Happy" i]:hover::after,
.grid .cell[data-label="Calm" i]:hover::after,
.grid .cell[data-label="Sad" i]:hover::after {
  box-shadow: inset 0 0 0 2px var(--hover-outline), inset 0 0 0 1.5px rgba(255,255,255,0.9);
}

/* Small screens adjustments */
@media (max-width: 640px) {
  .grid { gap: 4px; --grid-pad: 8px; padding: var(--grid-pad); }
  .cell { border-radius: 8px; font-size: 10px; padding: 3px; }
}


/* Axis labels repositioning */
.y-axis-top-label {
  grid-column: 2;
  grid-row: 1;
  text-align: center;
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}
.y-axis-bottom-label {
  grid-column: 2;
  grid-row: 3;
  text-align: center;
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}
.x-axis-left-label {
  grid-column: 1;
  grid-row: 2;
  writing-mode: vertical-rl;
  transform: rotate(180deg);
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}
.x-axis-right-label {
  grid-column: 3;
  grid-row: 2;
  writing-mode: vertical-rl;
  color: var(--axis);
  font-weight: 600;
  letter-spacing: .6px;
}


/* Auth UI (upper-right) */
.auth-actions { position: absolute; right: 16px; top: 12px; display: flex; gap: 10px; align-items: center; }
.google-login-btn {
  background: #ffffff;
  color: #111217;
  border: 0;
  border-radius: 6px;
  padding: 6px 10px;
  font-weight: 700;
  text-decoration: none;
  box-shadow: var(--shadow);
}
.google-login-btn:hover { filter: brightness(0.95); }
.logout-btn {
  background: transparent;
  border: 1px solid var(--cell-border);
  color: var(--text);
  border-radius: 6px;
  padding: 6px 10px;
  cursor: pointer;
}
.logout-btn:hover { border-color: var(--hover-outline); }
.avatar { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; box-shadow: 0 0 0 1px rgba(255,255,255,0.2); }
.user-name { font-size: 0.9rem; color: var(--axis); }

/* Last entry banner (legacy in-main) */
.last-entry-banner {
  margin-top: 32px;
  padding-top: 10px;
  border-top: 1px solid rgba(255,255,255,0.14);
  color: var(--axis);
  font-size: 0.95rem;
}

/* Footer styles */
.footer {
  padding: 0;
  color: var(--axis);
  border-top: none;
  background: transparent;
  text-align: center;
}
.footer-last-entry { font-size: 0.95rem; }

/* Mood Meter page-specific footer padding for breathing room */
.mood-meter-page .footer {
  padding: 12px 24px 20px;
}

/* Cozy toast styles */
.mood-toast-root {
  position: fixed;
  left: 50%;
  bottom: 24px;
  transform: translateX(-50%);
  display: grid;
  gap: 10px;
  z-index: 10000;
  pointer-events: none; /* don't block page interactions */
}

.mood-toast {
  --accent: #f7a76c; /* will be overridden dynamically per mood cell */
  pointer-events: auto;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-radius: 14px;
  color: #fff;
  background:
    radial-gradient(1000px 400px at 50% -40%, rgba(255,255,255,0.06), rgba(255,255,255,0.02)),
    linear-gradient(180deg, rgba(255, 240, 228, 0.16), rgba(255, 222, 196, 0.10));
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow:
    0 10px 35px rgba(0,0,0,0.45),
    0 6px 18px rgba(0,0,0,0.35),
    0 0 0 1px rgba(255,255,255,0.03) inset,
    0 10px 30px color-mix(in srgb, var(--accent) 30%, transparent);
  position: relative;
  overflow: hidden;
}

/* Subtle warm sheen */
.mood-toast::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(120px 50px at 20% -10%, color-mix(in srgb, var(--accent) 22%, transparent), transparent 60%);
  opacity: 0.5;
  pointer-events: none;
}

.mood-toast__icon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: inline-grid;
  place-items: center;
  color: #fff;
  background: radial-gradient(60% 60% at 30% 30%, #ffffffaa, #ffffff22),
              color-mix(in srgb, var(--accent) 70%, #ffffff00);
  box-shadow:
    0 4px 14px color-mix(in srgb, var(--accent) 40%, transparent),
    0 0 0 1px rgba(255,255,255,0.2) inset;
}

.mood-toast__text { display: grid; line-height: 1.15; }
.mood-toast__title { font-weight: 800; letter-spacing: 0.2px; }
.mood-toast__sub { font-size: 0.85rem; opacity: 0.85; }


/* Near-full-screen celebratory overlay */
.mood-overlay-root {
  position: fixed;
  inset: 0;
  z-index: 10010;
  pointer-events: none; /* let inner overlay handle interactions */
}

.mood-overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  pointer-events: auto;
}

.mood-overlay__backdrop {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(1200px 800px at 50% -10%, rgba(17,18,23,0.75), rgba(8,9,12,0.86)),
    rgba(0,0,0,0.35);
  -webkit-backdrop-filter: blur(6px) saturate(1.05);
  backdrop-filter: blur(6px) saturate(1.05);
}

.mood-overlay__panel {
  --accent: #8ed1a5;
  width: min(92vw, 1100px);
  height: min(78vh, 740px);
  border-radius: 28px;
  position: relative;
  overflow: hidden;
  display: grid;
  place-items: center;
  padding: 24px;
  color: #fff;
  background:
    radial-gradient(1200px 900px at 50% -20%, rgba(255,255,255,0.10), rgba(255,255,255,0.02)),
    linear-gradient(165deg, color-mix(in srgb, var(--accent) 26%, #ffffff00), color-mix(in srgb, var(--accent) 8%, #0f1014) 55%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  box-shadow:
    0 30px 80px rgba(0,0,0,0.55),
    0 12px 30px rgba(0,0,0,0.45),
    0 0 0 1px rgba(255,255,255,0.06) inset,
    0 0 120px color-mix(in srgb, var(--accent) 30%, transparent) inset;
}

/* Soft inner glow element */
.mood-overlay__glow {
  position: absolute;
  inset: -20%;
  background: radial-gradient(60% 40% at 50% 20%, color-mix(in srgb, var(--accent) 45%, transparent), transparent 70%);
  opacity: 0.7;
  pointer-events: none;
}

.mood-overlay__icon {
  width: clamp(88px, 12vw, 140px);
  height: clamp(88px, 12vw, 140px);
  border-radius: 50%;
  display: grid;
  place-items: center;
  color: #fff;
  background:
    radial-gradient(60% 60% at 30% 30%, #ffffffcc, #ffffff33),
    color-mix(in srgb, var(--accent) 80%, #ffffff00);
  box-shadow:
    0 30px 70px color-mix(in srgb, var(--accent) 45%, transparent),
    0 6px 24px rgba(0,0,0,0.35),
    0 0 0 2px rgba(255,255,255,0.18) inset;
}

.mood-overlay__sub {
  margin-top: 16px;
  font-weight: 700;
  font-size: clamp(16px, 2.4vw, 26px);
  letter-spacing: 0.2px;
  opacity: 0.92;
  text-shadow: 0 2px 18px rgba(0,0,0,0.35);
}

/* Smaller screens: panel fills more of the screen */
@media (max-width: 640px) {
  .mood-overlay__panel { width: 96vw; height: 80vh; border-radius: 22px; }
}


/* Neon warning modal */
.neon-modal-root { position: fixed; inset: 0; z-index: 10020; pointer-events: none; }
.neon-modal { position: absolute; inset: 0; display: grid; place-items: center; pointer-events: auto; }
.neon-modal__backdrop {
  position: absolute; inset: 0;
  background: radial-gradient(1000px 700px at 50% -10%, rgba(10,12,16,0.85), rgba(6,7,10,0.92)), rgba(0,0,0,0.4);
  -webkit-backdrop-filter: blur(8px) saturate(1.1);
  backdrop-filter: blur(8px) saturate(1.1);
}
.neon-modal__panel {
  position: relative;
  width: min(92vw, 520px);
  border-radius: 20px;
  padding: 22px 18px;
  color: #e8f7ff;
  background:
    radial-gradient(1200px 800px at 50% -30%, rgba(255,255,255,0.08), rgba(255,255,255,0.02)),
    linear-gradient(180deg, rgba(30,32,40,0.9), rgba(18,20,26,0.96));
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow:
    0 24px 70px rgba(0,0,0,0.6),
    0 12px 30px rgba(0,0,0,0.5),
    0 0 0 1px rgba(255,255,255,0.06) inset,
    0 0 40px rgba(0,234,255,0.25),
    0 0 60px rgba(255,0,255,0.2);
  overflow: hidden;
}
/* Animated neon border ring */
.neon-modal__panel::after {
  content: ""; position: absolute; inset: -2px; border-radius: inherit; padding: 2px;
  background: conic-gradient(from var(--a, 0deg), #00eaff, #ff00ff, #8aff00, #00eaff);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation: neon-spin 8s linear infinite;
  opacity: 0.55; pointer-events: none;
}
@keyframes neon-spin { to { --a: 360deg; } }

.neon-modal__glow { position: absolute; inset: -25%; pointer-events: none; background: radial-gradient(60% 40% at 30% 20%, rgba(0,234,255,0.20), transparent 70%), radial-gradient(60% 40% at 70% 30%, rgba(255,0,255,0.18), transparent 70%); filter: blur(12px); opacity: 0.9; }
.neon-modal__icon { width: 58px; height: 58px; margin: 2px auto 10px; border-radius: 50%; display: grid; place-items: center; color: #00eaff;
  background: radial-gradient(60% 60% at 40% 30%, #ffffffcc, #ffffff22), linear-gradient(180deg, rgba(0,234,255,0.35), rgba(255,0,255,0.18));
  box-shadow: 0 10px 30px rgba(0,234,255,0.28), 0 0 0 2px rgba(255,255,255,0.12) inset, 0 0 50px rgba(255,0,255,0.18);
}
.neon-modal__title { text-align: center; font-weight: 800; letter-spacing: .3px; font-size: 1.1rem; margin-top: 6px; color: #eaffff; text-shadow: 0 0 16px rgba(0,234,255,0.35), 0 0 22px rgba(255,0,255,0.22); }
.neon-modal__message { margin: 8px 8px 14px; text-align: center; color: #cfe7ff; opacity: 0.95; }
.neon-modal__actions { display: flex; justify-content: center; gap: 10px; }

.neon-btn { appearance: none; border: 1px solid rgba(255,255,255,0.2); color: #e8ffff; background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(255,255,255,0.04)); padding: 8px 14px; border-radius: 12px; font-weight: 800; letter-spacing: .2px; cursor: pointer; box-shadow: 0 0 0 1px rgba(255,255,255,0.05) inset, 0 10px 20px rgba(0,0,0,0.4), 0 0 24px rgba(0,234,255,0.18), 0 0 30px rgba(255,0,255,0.12); transition: transform .15s ease, box-shadow .15s ease, filter .15s ease; }
.neon-btn:hover { transform: translateY(-1px); box-shadow: 0 0 0 1px rgba(255,255,255,0.08) inset, 0 14px 28px rgba(0,0,0,0.5), 0 0 32px rgba(0,234,255,0.26), 0 0 38px rgba(255,0,255,0.2); }
.neon-btn:active { transform: translateY(0); filter: brightness(0.95); }

@media (max-width: 480px) {
  .neon-modal__panel { width: 92vw; border-radius: 16px; padding: 18px 14px; }
  .neon-modal__message { font-size: 0.95rem; }
}


/* New central axis components */
.axis-x {
  grid-column: 2;
  grid-row: 3;
  width: 100%;
  height: 56px;
  position: relative;
  color: var(--axis);
}
.axis-y {
  grid-column: 1;
  grid-row: 2;
  width: 72px;
  height: 100%;
  position: relative;
  color: var(--axis);
}
.axis-x-svg,
.axis-y-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}
.axis-label {
  position: absolute;
  font-weight: 900;
  letter-spacing: 0.8px;
  color: var(--axis);
  text-shadow: 0 1px 2px rgba(0,0,0,0.4);
  font-size: clamp(18px, 2.6vw, 30px);
  pointer-events: none;
}
.axis-label-x {
  left: 50%;
  top: calc(50% + 12px); /* place label below the arrow line (raised slightly to avoid footer collision) */
  transform: translateX(-50%);
}
.axis-label-y {
  left: auto;
  right: calc(50% + 12px); /* place label fully to the left (outside) of the vertical arrow line */
  top: 50%;
  transform: translateY(-50%) rotate(-90deg);
  transform-origin: center;
  white-space: nowrap;
}
@media (max-width: 640px) {
  .axis-x { height: 44px; }
  .axis-y { width: 56px; }
}

/* Mobile-responsive enhancements */

/* Global touch target sizing and form controls */
:root {
  --tap-min: 40px;
}

button, .btn, .google-login-btn, .logout-btn, input, select {
  min-height: 36px;
}

/* Header/auth area adjustments on small screens */
@media (max-width: 780px) {
  .header { padding: 14px 12px 6px; }
  .auth-actions { position: static; right: auto; top: auto; justify-content: center; flex-wrap: wrap; gap: 8px; margin-bottom: 6px; }
  .title { font-size: clamp(20px, 6vw, 28px); }
}

/* Axes layout sizing tweaks */
@media (max-width: 780px) {
  .axes-layout { grid-template-columns: auto minmax(220px, 94vw) auto; grid-template-rows: auto minmax(220px, 62vh) auto; gap: 8px 10px; }
}
@media (max-width: 560px) {
  .axes-layout { grid-template-columns: 1fr; grid-template-rows: auto auto auto; }
  /* Keep axes visible but tighter; if space constrained theyâ€™ll wrap above/below */
  .axis-y, .axis-x { margin: 0; }
}

/* Grid density on very small screens */
@media (max-width: 640px) {
  .grid { gap: 4px; --grid-pad: 8px; padding: var(--grid-pad); border-radius: 12px; }
  .cell { border-radius: 8px; font-size: 10px; padding: 3px; }
}

/* Student/Teacher dashboard header and actions */
@media (max-width: 900px) {
  .dash-container { padding: 12px; }
  .dash-header { flex-wrap: wrap; gap: 8px; }
  .dash-header h1 { flex: 1 1 100%; margin-bottom: 2px; text-align: left; }
  .header-actions { flex-wrap: wrap; justify-content: flex-start; }
}
@media (max-width: 580px) {
  .dash-container { padding: 10px; }
  .dash-header h1 { text-align: center; }
  .header-actions { width: 100%; justify-content: center; }
}

/* Filters grids collapse on small screens (override inline .filters rules) */
@media (max-width: 900px) {
  .dash-container .filters { grid-template-columns: repeat(2, minmax(140px, 1fr)); }
  .dash-container .filter-actions { grid-column: 1 / -1; }
}
@media (max-width: 580px) {
  .dash-container .filters { grid-template-columns: 1fr; }
}

/* Stats grids collapse */
@media (max-width: 900px) {
  .stats, .stats-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 580px) {
  .stats, .stats-grid { grid-template-columns: 1fr; }
}

/* Tab bar wrapping and spacing */
@media (max-width: 780px) {
  .tabbar { flex-wrap: wrap; gap: 6px; }
  .tab-btn { width: auto; }
}

/* Tables: ensure scroll on narrow screens */
.dataframe { width: 100%; border-collapse: collapse; }
@media (max-width: 680px) {
  .dataframe th, .dataframe td { white-space: nowrap; }
}

/* Toast width on phones */
@media (max-width: 520px) {
  .mood-toast-root { left: 50%; transform: translateX(-50%); }
  .mood-toast { width: calc(100vw - 24px); }
}

/* Override inline grid for group member add form on small screens */
@media (max-width: 580px) {
  form#addMemberForm2 { grid-template-columns: 1fr !important; }
  form#addMemberForm2 > div { grid-template-columns: 1fr !important; }
}

/* Average anchor glow overlay */
.grid .avg-glow {
  position: absolute;
  inset: 0;
  border-radius: 16px;
  pointer-events: none;
  z-index: 1; /* above cells, below hover states which raise z-index */
  mix-blend-mode: screen; /* subtle lightening glow on dark theme */
}

/* Legend for average anchor */
.avg-legend {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
  font-size: 13px;
  color: #ccd1db;
}
.avg-legend .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(255,255,255,0.18);
}
.avg-legend .label { opacity: .95; font-size: 75%; }


/* Quadrant color dots for average legend */
.avg-legend .dot.q-red { background: #E03838; }
.avg-legend .dot.q-yellow { background: #F6DF5F; }
.avg-legend .dot.q-blue { background: #4670D6; }
.avg-legend .dot.q-green { background: #4AC981; }


/* Axis transparency overrides: ensure no card or visible background around axes */
.axis-x, .axis-y, .axis-x-svg, .axis-y-svg, .axis-label {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

.mobile-mood { display: none; width: 100%; max-width: 520px; margin: 0 auto; }
.mobile-mood-title { text-align: center; margin: 8px 0 12px; font-size: 20px; color: var(--axis); }
.mobile-quad-grid { display: grid; grid-template-columns: repeat(2, 1fr); grid-auto-rows: minmax(120px, 32vh); gap: 12px; }
.mobile-quad { appearance: none; border: 1px solid var(--cell-border); border-radius: 14px; color: #0f1014; font-weight: 800; font-size: 22px; display: grid; place-items: center; box-shadow: var(--shadow); }
.mobile-quad span { filter: drop-shadow(0 2px 4px rgba(0,0,0,0.25)); }
.mobile-quad.q-red { background: linear-gradient(160deg, rgb(224,56,56), rgba(0,0,0,0.1)); color: #fff; }
.mobile-quad.q-yellow { background: linear-gradient(160deg, rgb(246,223,95), rgba(0,0,0,0.1)); color: #0f1014; }
.mobile-quad.q-blue { background: linear-gradient(160deg, rgb(70,112,214), rgba(0,0,0,0.1)); color: #fff; }
.mobile-quad.q-green { background: linear-gradient(160deg, rgb(74,201,129), rgba(0,0,0,0.1)); color: #0f1014; }

.mobile-drilldown[hidden] { display: none !important; }
.mobile-drilldown { position: fixed; inset: 0; background: #0f1014; z-index: 9999; display: flex; flex-direction: column; padding: 12px; }
.mobile-drilldown-header { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.back-btn { background: transparent; border: 1px solid var(--cell-border); color: var(--text); padding: 8px 12px; border-radius: 10px; }
.mobile-drilldown-title { font-weight: 800; font-size: 18px; color: var(--text); }
.mobile-drilldown-list { flex: 1; display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; overflow: auto; --grid-pad: 10px; padding: var(--grid-pad); border-radius: 16px; background: rgba(255,255,255,0.05); box-shadow: var(--shadow); }
.mobile-mood-item { appearance: none; border: 1px solid var(--cell-border); background: #22242b; color: #f8f8fb; border-radius: 10px; padding: 8px; text-align: center; font-weight: 600; font-size: clamp(12px, 3.8vw, 16px); display: flex; align-items: center; justify-content: center; line-height: 1.15; transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease, background 200ms ease, filter 200ms ease; position: relative; overflow: hidden; }

@media (max-width: 768px) {
  .mood-meter-page .axes-layout { display: none; }
  .mood-meter-page .footer { padding: 12px; }
  .mobile-mood { display: block; }
}

/* === Make67 page styles (scoped) === */
.make67-page .make67-container { display: grid; gap: 16px; place-items: center; }
.make67-page .subtitle { color: var(--axis); font-weight: 600; letter-spacing: .3px; }
.make67-page .cards-grid { display: grid; grid-template-columns: repeat(2, minmax(168px, 30.8vw)); grid-auto-rows: minmax(168px, 30.8vw); gap: 20px; --pad: 14px; padding: var(--pad); border-radius: 16px; background: rgba(51,51,51,1); box-shadow: var(--shadow); position: relative; overflow: hidden; z-index: 10; }
.make67-page .card { appearance:none; border:1px solid var(--cell-border); background:#22242b; color:#fff; border-radius:18px; font-size: clamp(39px, 8.4vw, 64px); font-weight: 900; display:grid; place-items:center; position:relative; overflow:hidden; box-shadow: var(--shadow); transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease; }
.make67-page .card:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(0,0,0,0.45); border-color: var(--hover-outline); }
.make67-page .card.selected { box-shadow: 0 0 0 2px var(--selected-outline), 0 10px 24px rgba(0,0,0,0.5); transform: translateY(-2px) scale(1.02); z-index: 2; }
.make67-page .card.removed { visibility: hidden; }
.make67-page .card span { filter: drop-shadow(0 3px 6px rgba(0,0,0,0.35)); }

.make67-page .ops { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
.make67-page .op-btn { min-width: 64px; min-height: 64px; border-radius: 16px; border:1px solid #3a3f47; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); color:#eaf3ff; font-size: 28px; font-weight: 900; cursor:pointer; box-shadow: 0 10px 25px rgba(0,0,0,0.4); transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, border-color .15s ease; }
.make67-page .op-btn:hover { transform: translateY(-1px); filter: brightness(1.05); box-shadow: 0 14px 32px rgba(0,0,0,0.5); }
.make67-page .op-btn:active { transform: translateY(0); filter: brightness(0.95); }
.make67-page .op-btn.active { border-color: #9fe3b5; box-shadow: 0 0 0 2px rgba(159,227,181,0.45) inset, 0 0 24px rgba(159,227,181,0.35); }
.make67-page .op-btn.ghost { background: transparent; color: var(--axis); }

.make67-page .score-box { display:grid; place-items:center; gap:6px; padding: 14px 20px; border:1px solid rgba(255,255,255,0.14); border-radius: 14px; background: rgba(255,255,255,0.04); box-shadow: var(--shadow); }
.make67-page .score-label { font-size: 17px; color: var(--axis); font-weight: 700; }
.make67-page .score-value { font-size: 45px; font-weight: 900; }

.make67-page .note { min-height: 22px; color: #ccd1db; opacity: .9; font-size: 14px; text-align:center; }

/* Desktop-fit overrides for Make67 to avoid page scroll */
@media (min-width: 901px) {
  .make67-page .header { padding: 12px 16px 6px; }
  /* Allow main content to grow/scroll so Shop appears below Inventory and does not overlap footer */
  .make67-page .main { padding: 10px 14px; place-items: center; /* removed max-height & overflow hidden */ }
  .make67-page .make67-layout { width: 100vw; max-width: 100vw; gap: 24px; grid-template-columns: minmax(280px, 360px) 1fr minmax(280px, 360px); align-items: start; }
    .make67-page .m67-game { grid-column: 2; }
    .make67-page .m67-leaderboard { grid-column: 1; align-self: start; }
    .make67-page .m67-chat { grid-column: 3; align-self: start; }
  .make67-page .m67-leaderboard { max-height: calc(100vh - 120px); overflow: auto; }
  .make67-page .make67-container { --board: min(78vh, calc(100vw - 420px)); gap: 12px; place-items: center; }
    .make67-page .m67-game { display: grid; place-items: center; justify-self: center; }
  .make67-page .cards-grid { grid-template-columns: repeat(2, minmax(180px, min(24vw, 30vh))); grid-auto-rows: minmax(180px, min(24vw, 30vh)); gap: 16px; }
  .make67-page .card { font-size: clamp(36px, 6.8vh, 64px); border-radius: 16px; }
  .make67-page .ops { gap: 10px; }
  .make67-page .op-btn { min-width: clamp(44px, 6vh, 56px); min-height: clamp(44px, 6vh, 56px); font-size: clamp(18px, 3.2vh, 22px); border-radius: 14px; }
  .make67-page .score-box { padding: 14px 20px; }
  .make67-page .score-value { font-size: clamp(25px, 4.5vh, 36px); }
  .make67-page .note { font-size: 12px; min-height: 18px; }
  /* Small, lowâ€‘priority back link in top-left */
  .make67-page .back-link { position: absolute; left: 16px; top: 12px; font-size: 12px; color: var(--axis); opacity: .85; background: transparent; border: 1px solid transparent; padding: 4px 6px; border-radius: 8px; text-decoration: none; }
  .make67-page .back-link:hover { text-decoration: underline; opacity: 1; }
}

/* Height-aware fit rules to ensure operations stay visible without fullscreen */
@media (min-width: 901px) and (max-height: 900px) {
  .make67-page .game-board-wrapper { padding: clamp(12px, 3.2vh, 28px); }
  .make67-page .cards-grid { grid-template-columns: repeat(2, minmax(160px, min(22vw, 28vh))); grid-auto-rows: minmax(160px, min(22vw, 28vh)); gap: 14px; }
  .make67-page .op-btn { min-width: clamp(40px, 5.2vh, 52px); min-height: clamp(40px, 5.2vh, 52px); font-size: clamp(16px, 2.8vh, 22px); }
}

@media (min-width: 901px) and (max-height: 740px) {
  .make67-page .game-board-wrapper { padding: clamp(10px, 2.6vh, 22px); }
  .make67-page .cards-grid { grid-template-columns: repeat(2, minmax(140px, min(20vw, 24vh))); grid-auto-rows: minmax(140px, min(20vw, 24vh)); gap: 12px; }
  .make67-page .op-btn { min-width: clamp(38px, 4.8vh, 48px); min-height: clamp(38px, 4.8vh, 48px); font-size: clamp(15px, 2.5vh, 20px); }
}

/* Merge fly animation */
.ghost-card { z-index: 10000; pointer-events:none; }
@keyframes fly { to { transform: translate(var(--dx,0), var(--dy,0)) scale(0.7) rotate(6deg); opacity: 0; } }
.fly-merge { animation: fly 480ms cubic-bezier(.2,.7,.2,1); }

/* Pop on merge and success */
@keyframes pop { 0%{ transform: scale(1); } 50%{ transform: scale(1.08);} 100%{ transform: scale(1);} }
.merge-pop { animation: pop 320ms ease; }
@keyframes winpop { 0%{ transform: scale(1) rotate(0); } 40%{ transform: scale(1.12) rotate(3deg);} 100%{ transform: scale(1) rotate(0);} }
.win-pop { animation: winpop 900ms ease; }

/* Deny and shake */
@keyframes shake { 10%, 90% { transform: translateX(-2px);} 20%, 80% { transform: translateX(4px);} 30%, 50%, 70% { transform: translateX(-6px);} 40%, 60% { transform: translateX(6px);} }
.deny { box-shadow: 0 0 0 2px rgba(255,85,85,0.6) inset !important; }
.shake { animation: shake 600ms ease both; }

/* Success overlay */
.m67-overlay-root { position: fixed; inset: 0; z-index: 10020; display: block; }
.m67-overlay-root[hidden] { display: none !important; }
.m67-overlay { position: absolute; inset: 0; display: grid; place-items: center; }
.m67-overlay__backdrop { position: absolute; inset:0; z-index: 0; pointer-events: none; background: radial-gradient(900px 600px at 50% -10%, rgba(17,18,23,0.8), rgba(8,9,12,0.9)), rgba(0,0,0,0.25); -webkit-backdrop-filter: blur(6px) saturate(1.05); backdrop-filter: blur(6px) saturate(1.05); }
.m67-overlay__panel { --accent:#9fe3b5; position: relative; z-index: 1; width: min(92vw, 540px); border-radius: 20px; padding: 20px; background: linear-gradient(165deg, color-mix(in srgb, var(--accent) 22%, #ffffff00), #11131a), linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.14); box-shadow: 0 24px 70px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset; display:grid; place-items:center; color:#fff; text-align:center; box-sizing: border-box; }

/* Lock body scroll when a modal is open to prevent page scrollbars flicker */
body.m67-modal-open { overflow: hidden; }
.m67-overlay__glow { position:absolute; inset:-20%; z-index: -1; background: radial-gradient(40% 30% at 50% 25%, color-mix(in srgb, var(--accent) 28%, transparent), transparent 70%); pointer-events:none; }
.m67-overlay__icon { width:78px; height:78px; display:grid; place-items:center; font-size:48px; border-radius:50%; box-shadow: 0 10px 30px rgba(0,0,0,0.5), 0 0 0 2px rgba(255,255,255,0.12) inset; background: radial-gradient(60% 60% at 40% 30%, #ffffffcc, #ffffff22), linear-gradient(180deg, rgba(159,227,181,0.35), rgba(159,227,181,0.18)); }
.m67-overlay__title { margin-top: 10px; font-weight: 900; letter-spacing: .3px; font-size: 22px; }

@media (max-width: 560px){
  .make67-page .cards-grid { grid-template-columns: repeat(2, minmax(110px, 42vw)); grid-auto-rows: minmax(110px, 42vw); }
  .make67-page .op-btn { min-width: 56px; min-height: 56px; font-size: 24px; }
}

/* Mobile drill-down items interaction (match main grid feel) */
.mobile-mood-item::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 0 0 0px transparent;
  transition: box-shadow 120ms ease;
}
.mobile-mood-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  border-color: var(--hover-outline);
  z-index: 2;
}
.mobile-mood-item:hover::after {
  box-shadow: inset 0 0 0 2px var(--hover-outline);
}
.mobile-mood-item:focus-visible { outline: 3px solid #fff; outline-offset: 2px; }


/* Session UI (top-left) */
.session-actions { position: absolute; left: 16px; top: 12px; display: flex; align-items: center; gap: 8px; }
/* Make67 launcher: square on desktop, matches Session/Dashboard buttons on mobile */
.make67-btn {
  --gold: #FFD700; /* subtle golden accent */
  display: grid;
  place-items: center;
  width: auto;
  height: auto;
  padding: 8px 12px; /* fit to text */
  background: #ffffff;
  color: #111217;
  text-decoration: none;
  font-weight: 800;
  border-radius: 8px;
  border: 0;
  line-height: 1;
  letter-spacing: 0.2px;
  will-change: transform, box-shadow;
  transform-origin: center;
  /* thin golden outline + very soft glow (with fallback) */
  /* Fallback for browsers without color-mix() */
  box-shadow:
    var(--shadow),
    0 0 0 1px rgba(255,215,0,0.40),
    0 0 10px rgba(255,215,0,0.18);
  /* Preferred with color-mix() */
  box-shadow:
    var(--shadow),
    0 0 0 1px color-mix(in srgb, var(--gold), transparent 40%),
    0 0 10px color-mix(in srgb, var(--gold), transparent 82%);
  /* slightly stronger, quicker pulse so it's easier to notice */
  animation: pulse-gold 1.9s ease-in-out infinite;
}
.make67-btn:hover { filter: brightness(0.95); }
.session-btn { background: #ffffff; color: #111217; border: 0; border-radius: 6px; padding: 6px 10px; font-weight: 700; text-decoration: none; box-shadow: var(--shadow); cursor: pointer; }
.session-btn:hover { filter: brightness(0.95); }
.session-btn.active { background: #d1f7e1; box-shadow: 0 0 0 2px rgba(74,201,129,0.45) inset, 0 0 18px rgba(74,201,129,0.6); }
.session-status { font-size: 12px; color: var(--axis); opacity: .85; }

/* Mobile: make it look like the Session/Dashboard buttons (not square) */
@media (max-width: 600px) {
  .make67-btn { width: auto; height: auto; padding: 6px 10px; border-radius: 6px; font-weight: 700; letter-spacing: 0; }
}

/* Session heat glow and counts */
.grid .cell .count-badge { position: absolute; right: 6px; top: 6px; font-size: 12px; font-weight: 800; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.8); pointer-events: none; }
.grid .cell.session-glow::before { content: ""; position: absolute; inset: -6px; border-radius: inherit; pointer-events: none; box-shadow: 0 0 calc(28px * var(--session-glow, 0)) rgba(255,255,255,0.35), 0 0 calc(50px * var(--session-glow, 0)) rgba(255,255,255,0.25) inset; transition: box-shadow 180ms ease; }


/* Session popover menu */
.session-menu { position: fixed; z-index: 10000; background: #1f2227; color: #e8eaef; border: 1px solid #3a3f47; border-radius: 10px; box-shadow: 0 6px 22px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.06); padding: 10px; width: min(320px, calc(100vw - 24px)); }
.session-menu h4 { margin: 0 0 8px; font-size: 14px; font-weight: 800; }
.session-menu .row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; }
.session-menu input { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #3a3f47; background: #121418; color: #e8eaef; }
.session-menu .actions { display: flex; gap: 8px; flex-wrap: wrap; }
.session-menu button { background: #2f3540; color: #e8eaef; border: 1px solid #3a3f47; padding: 8px 12px; border-radius: 8px; cursor: pointer; }
.session-menu button:hover { filter: brightness(1.05); }
.session-menu .note { font-size: 12px; opacity: .85; margin-top: 6px; }


/* === Make67 layout & leaderboard === */
.make67-page .make67-layout { display: grid; gap: 24px; width: 100vw; max-width: 100vw; align-items: start; }
.make67-page .m67-game { display: block; }
.make67-page .m67-leaderboard { border:1px solid rgba(255,255,255,0.14); border-radius: 14px; background: rgba(255,255,255,0.04); box-shadow: var(--shadow); padding: 12px; }
.make67-page .m67-chat { border:1px solid rgba(255,255,255,0.14); border-radius: 14px; background: rgba(255,255,255,0.04); box-shadow: var(--shadow); padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.make67-page .m67-chat__title { margin: 0 0 4px; font-size: 14px; font-weight: 800; color: var(--axis); letter-spacing: .3px; }
.make67-page .m67-chat__log { min-height: 140px; max-height: calc(100vh - 160px); overflow: auto; border: 1px solid var(--cell-border); border-radius: 10px; padding: 8px; background: #1c1f26; }
.make67-page .m67-chat__form { display: flex; gap: 8px; align-items: center; }
.make67-page .m67-chat__input { flex: 1; min-width: 0; padding: 10px 12px; border-radius: 10px; border:1px solid #3a3f47; background:#121418; color:#e8ecf5; }
.make67-page .m67-chat-row { margin: 4px 0; line-height: 1.25; word-break: break-word; }
.make67-page .m67-chat-user { font-weight: 800; color: #e8ecf5; opacity: .95; }
.make67-page .m67-chat-text { color: #cfd3dc; }
.make67-page .m67-lb-title { margin: 4px 6px 10px; font-size: 14px; font-weight: 800; color: var(--axis); letter-spacing: .3px; }
.make67-page .m67-lb-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 6px; }
.make67-page .m67-lb-item { display: grid; grid-template-columns: 24px 1fr auto; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 10px; border:1px solid var(--cell-border); background: #1d2026; color: #e8ecf5; position: relative; overflow: hidden; }
.make67-page .m67-lb-item .rank { font-weight: 900; opacity: .8; }
.make67-page .m67-lb-item .name { font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.make67-page .m67-lb-item .total { font-weight: 900; }
.make67-page .m67-lb-empty { padding: 8px 10px; opacity: .8; color: var(--axis); }
.make67-page .score-row { display: flex; gap: 16px; flex-wrap: wrap; justify-content: center; margin-bottom: 12px; }

@media (max-width: 900px) {
  .make67-page .make67-layout { display: flex; flex-direction: column; max-width: 640px; }
  .make67-page .m67-game { order: 1; }
  .make67-page .m67-leaderboard { order: 2; margin-top: 10px; }
  .make67-page .m67-chat { order: 3; margin-top: 10px; }
}


/* Subtle golden pulse for Make67 button */
@keyframes pulse-gold {
  0%, 100% {
    transform: scale(1);
    box-shadow:
      var(--shadow),
      0 0 0 1px rgba(255, 215, 0, 0.45),
      0 0 12px rgba(255, 215, 0, 0.22);
  }
  50% {
    transform: scale(1.03);
    box-shadow:
      var(--shadow),
      0 0 0 1px rgba(255, 215, 0, 0.70),
      0 0 20px rgba(255, 215, 0, 0.32);
  }
}

.make67-btn:focus-visible {
  outline: 2px solid rgba(255, 215, 0, 0.8);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .make67-btn { animation: none; }
}

/* Make67 leaderboard: highlight #1 with golden star and glow */
.make67-page .m67-lb-item.top1 {
  position: relative;
  border-color: rgba(255, 215, 0, 0.55);
  background:
    radial-gradient(120px 48px at 20% 50%, rgba(255, 215, 0, 0.07), transparent 60%),
    #1d2026;
  box-shadow:
    var(--shadow),
    0 0 0 1px rgba(255, 215, 0, 0.50),
    0 0 16px rgba(255, 215, 0, 0.28);
  animation: top1-glow 2s ease-in-out infinite;
}

.make67-page .m67-lb-item.top1 .rank { color: #FFD700; text-shadow: 0 0 8px rgba(255,215,0,0.55); }

/* Rank badges & regal colorways */
.make67-page .m67-lb-item .rank-icon { margin-right: 6px; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.45)); }
.make67-page .m67-lb-item .rank-title { opacity: .95; font-weight: 800; }

/* Effect badges next to names */
.make67-page .m67-lb-item .mud-ind { filter: drop-shadow(0 1px 1px rgba(0,0,0,.45)); font-size: 14px; }
.make67-page .m67-lb-item .boost-ind { filter: drop-shadow(0 1px 2px rgba(0,0,0,.55)); color: #8be9ff; text-shadow: 0 0 8px rgba(139,233,255,0.55); font-size: 14px; }

/* Boosted electric pulse */
@keyframes boost-pulse {
  0% { box-shadow: var(--shadow), 0 0 0 1px rgba(0,200,255,0.45), 0 0 10px rgba(0,200,255,0.25); }
  50% { box-shadow: var(--shadow), 0 0 0 1px rgba(0,255,255,0.7), 0 0 20px rgba(0,255,255,0.40), 0 0 36px rgba(0,255,255,0.25); }
  100% { box-shadow: var(--shadow), 0 0 0 1px rgba(0,200,255,0.45), 0 0 10px rgba(0,200,255,0.25); }
}

@keyframes bolt-spin {
  0% { transform: rotate(0deg); opacity: .45; }
  50% { opacity: .75; }
  100% { transform: rotate(360deg); opacity: .45; }
}

.make67-page .m67-lb-item.boosted {
  border-color: rgba(0, 220, 255, 0.55);
  background:
    radial-gradient(160px 72px at 80% -10%, rgba(0, 200, 255, 0.10), transparent 60%),
    #1d2026;
  animation: boost-pulse 1.3s ease-in-out infinite;
}
.make67-page .m67-lb-item.boosted::before {
  content: "";
  position: absolute; inset: -30% -10%;
  background: conic-gradient(from 0deg, rgba(0,255,255,0.0) 0 15%, rgba(0,255,255,0.25) 15% 18%, rgba(0,255,255,0.0) 18% 35%, rgba(0,255,255,0.35) 35% 38%, rgba(0,255,255,0.0) 38% 55%, rgba(0,255,255,0.25) 55% 58%, rgba(0,255,255,0.0) 58% 75%, rgba(0,255,255,0.32) 75% 78%, rgba(0,255,255,0.0) 78% 100%);
  filter: blur(6px) drop-shadow(0 0 10px rgba(0,255,255,0.35));
  animation: bolt-spin 3s linear infinite;
  pointer-events: none;
}

/* Divine Shield: persistent protective glow */
@keyframes shield-glow {
  0% { box-shadow: var(--shadow), 0 0 0 1px rgba(255, 215, 0, 0.45), 0 0 12px rgba(255, 215, 0, 0.25), inset 0 0 22px rgba(255,215,0,0.18); }
  50% { box-shadow: var(--shadow), 0 0 0 1px rgba(255, 215, 0, 0.65), 0 0 22px rgba(255, 215, 0, 0.35), inset 0 0 32px rgba(255,215,0,0.24); }
  100% { box-shadow: var(--shadow), 0 0 0 1px rgba(255, 215, 0, 0.45), 0 0 12px rgba(255, 215, 0, 0.25), inset 0 0 22px rgba(255,215,0,0.18); }
}
.make67-page .m67-lb-item.shielded {
  border-color: rgba(255, 215, 0, 0.55);
  background:
    radial-gradient(180px 80px at 50% -20%, rgba(255, 215, 0, 0.10), transparent 60%),
    #1d2026;
  animation: shield-glow 2.2s ease-in-out infinite;
}

/* Divine Shield activation: brief golden flash visible to all online users */
@keyframes shield-flash {
  0% { opacity: 0; }
  10% { opacity: 1; }
  100% { opacity: 0; }
}
.make67-page .m67-lb-item.flash-shield::after {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  background: radial-gradient(220px 120px at 50% -10%, rgba(255, 240, 180, 0.55), transparent 70%);
  filter: blur(1px);
  animation: shield-flash 900ms ease-out forwards;
}

/* Mudded splatter */
@keyframes mud-drip {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(1px); }
}
.make67-page .m67-lb-item.mudded {
  border-color: rgba(150, 95, 45, 0.6);
  background:
    radial-gradient(120px 48px at -10% -20%, rgba(120, 70, 30, 0.10), transparent 60%),
    #1d2026;
}
.make67-page .m67-lb-item.mudded::after {
  content: "";
  position: absolute; inset: -8px; pointer-events: none;
  background:
    radial-gradient(22px 18px at 12% 28%, rgba(95,60,30,0.65), rgba(95,60,30,0.15) 60%, transparent 70%),
    radial-gradient(16px 12px at 28% 62%, rgba(95,60,30,0.55), rgba(95,60,30,0.12) 60%, transparent 70%),
    radial-gradient(18px 14px at 78% 34%, rgba(95,60,30,0.60), rgba(95,60,30,0.15) 60%, transparent 70%),
    radial-gradient(26px 22px at 86% 72%, rgba(95,60,30,0.50), rgba(95,60,30,0.10) 60%, transparent 70%);
  filter: blur(0.5px) drop-shadow(0 2px 2px rgba(0,0,0,0.35));
  animation: mud-drip 1.6s ease-in-out infinite;
}

/* Mud targeting UX */
body.m67-mud-mode { cursor: none; }
.m67-mud-overlay {
  position: fixed; inset: 0; display: grid; place-items: start center; padding-top: 14vh;
  font-size: 24px; font-weight: 900; letter-spacing: 0.5px;
  color: #ffe6c7; text-shadow: 0 2px 8px rgba(0,0,0,0.55), 0 0 18px rgba(255,180,70,0.35);
  pointer-events: none; z-index: 20000;
}
.m67-mud-cursor {
  position: fixed; left: 0; top: 0; width: 28px; height: 28px; margin-left: -14px; margin-top: -14px;
  border-radius: 50%;
  background:
    radial-gradient(18px 12px at 70% 30%, rgba(255,255,255,0.25), transparent 60%),
    #5f3c1e;
  box-shadow: 0 4px 12px rgba(0,0,0,0.35), 0 0 0 1px rgba(255,255,255,0.08) inset;
  display: grid; place-items: center;
  z-index: 20010; pointer-events: none;
}
.m67-mud-cursor::after { content: 'ðŸ’©'; filter: drop-shadow(0 1px 1px rgba(0,0,0,.5)); font-size: 16px; }

.m67-mud-throw {
  position: fixed; left: 0; top: 0; width: 22px; height: 22px; margin-left: -11px; margin-top: -11px;
  border-radius: 50%; background: #5f3c1e; z-index: 20005; pointer-events: none;
  transform: translate(0,0);
  box-shadow: 0 3px 9px rgba(0,0,0,0.35), 0 0 0 1px rgba(255,255,255,0.08) inset;
}
@keyframes mud-throw-fly {
  0% { transform: translate(0,0) scale(1); filter: drop-shadow(0 3px 6px rgba(0,0,0,.3)); }
  85% { transform: translate(var(--tx), var(--ty)) scale(1.15); }
  100% { transform: translate(var(--tx), var(--ty)) scale(0.9); filter: drop-shadow(0 1px 2px rgba(0,0,0,.2)); }
}
.m67-mud-throw.go { animation: mud-throw-fly 420ms cubic-bezier(.2,.9,.1,1) forwards; }

/* Default (noob) muted */
.make67-page .m67-lb-item.rank-noob .name { color: #9aa0a6; text-shadow: 0 0 6px rgba(154,160,166,0.25); }
.make67-page .m67-lb-item.rank-noob { border-color: rgba(154,160,166,0.25); }

/* Beast â€“ fiery orange */
.make67-page .m67-lb-item.rank-beast .name { color: #ff6b00; text-shadow: 0 0 8px rgba(255,107,0,0.45); }
.make67-page .m67-lb-item.rank-beast { border-color: rgba(255,107,0,0.35); }

/* Nerd â€“ electric azure */
.make67-page .m67-lb-item.rank-nerd .name { color: #00b3ff; text-shadow: 0 0 8px rgba(0,179,255,0.45); }
.make67-page .m67-lb-item.rank-nerd { border-color: rgba(0,179,255,0.35); }

/* Soldier â€“ emerald */
.make67-page .m67-lb-item.rank-soldier .name { color: #22c55e; text-shadow: 0 0 8px rgba(34,197,94,0.45); }
.make67-page .m67-lb-item.rank-soldier { border-color: rgba(34,197,94,0.35); }

/* Genius â€“ royal purple */
.make67-page .m67-lb-item.rank-genius .name { color: #a855f7; text-shadow: 0 0 10px rgba(168,85,247,0.50); }
.make67-page .m67-lb-item.rank-genius { border-color: rgba(168,85,247,0.38); }

/* Legend â€“ amber gold */
.make67-page .m67-lb-item.rank-legend .name { color: #f59e0b; text-shadow: 0 0 10px rgba(245,158,11,0.55); }
.make67-page .m67-lb-item.rank-legend { border-color: rgba(245,158,11,0.40); }

/* Godlike â€“ imperial gold */
.make67-page .m67-lb-item.rank-godlike .name { color: #ffd700; text-shadow: 0 0 12px rgba(255,215,0,0.65); }
.make67-page .m67-lb-item.rank-godlike { border-color: rgba(255,215,0,0.50); }

/* Captain â€“ indigo */
.make67-page .m67-lb-item.rank-captain .name { color: #4f46e5; text-shadow: 0 0 10px rgba(79,70,229,0.55); }
.make67-page .m67-lb-item.rank-captain { border-color: rgba(79,70,229,0.42); }

/* OVERLORD â€“ imperial fuchsia */
.make67-page .m67-lb-item.rank-overlord .name { color: #ec4899; text-shadow: 0 0 12px rgba(236,72,153,0.65); }
.make67-page .m67-lb-item.rank-overlord { border-color: rgba(236,72,153,0.48); }
.make67-page .m67-lb-item.rank-supreme .name { color: #db2777; text-shadow: 0 0 12px rgba(219,39,119,0.68); }
.make67-page .m67-lb-item.rank-supreme { border-color: rgba(219,39,119,0.55); }

/* MASTER â€“ crimson authority */
.make67-page .m67-lb-item.rank-master .name { color: #ef4444; text-shadow: 0 0 12px rgba(239,68,68,0.60); }
.make67-page .m67-lb-item.rank-master { border-color: rgba(239,68,68,0.45); }

/* FREAK of NATURE â€“ toxic lime */
.make67-page .m67-lb-item.rank-freak .name { color: #a3e635; text-shadow: 0 0 12px rgba(163,230,53,0.60); }
.make67-page .m67-lb-item.rank-freak { border-color: rgba(163,230,53,0.45); }

/* 67676767676767 â€“ slate glitch */
.make67-page .m67-lb-item.rank-sixseven .name { color: #6b7280; text-shadow: 0 0 10px rgba(107,114,128,0.45); }
.make67-page .m67-lb-item.rank-sixseven { border-color: rgba(107,114,128,0.40); }

/* ALIEN â€“ neon mint */
.make67-page .m67-lb-item.rank-alien .name { color: #00ffc3; text-shadow: 0 0 14px rgba(0,255,195,0.70); }
.make67-page .m67-lb-item.rank-alien { border-color: rgba(0,255,195,0.52); }
.make67-page .m67-lb-item.top1 .total { color: #fff7c2; text-shadow: 0 0 8px rgba(255,215,0,0.35); }

/* CHEATER â€“ explicit red styling: name in red, CHEATER label bold red */
.make67-page .m67-lb-item.rank-cheater .name { color: #ff2d2d; text-shadow: 0 0 10px rgba(255,45,45,0.55); }
.make67-page .m67-lb-item.rank-cheater .rank-title { color: #ff2d2d; font-weight: 900; letter-spacing: 0.6px; }
.make67-page .m67-lb-item.rank-cheater { border-color: rgba(255,45,45,0.45); }

/* Decorative golden star next to #1 name */
.make67-page .m67-lb-item .name { display: inline-flex; align-items: center; gap: 6px; }
.top1-star {
  position: relative;
  display: inline-block;
  color: #FFD700;
  font-size: 1.05em;
  line-height: 1;
  margin-right: 6px;
  filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.55));
  animation: star-pulse 1.6s ease-in-out infinite;
}
/* Tiny orbiting spark around the star */
.top1-star::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 6px;
  height: 6px;
  margin-left: -3px;
  margin-top: -3px;
  border-radius: 50%;
  background: #FFD700;
  box-shadow: 0 0 8px rgba(255, 215, 0, 0.75);
  transform: rotate(0deg) translateX(12px) rotate(0deg);
  transform-origin: center;
  animation: orbit 2.8s linear infinite;
}

@keyframes top1-glow {
  0%, 100% {
    box-shadow:
      var(--shadow),
      0 0 0 1px rgba(255, 215, 0, 0.45),
      0 0 14px rgba(255, 215, 0, 0.26);
  }
  50% {
    box-shadow:
      var(--shadow),
      0 0 0 1px rgba(255, 215, 0, 0.85),
      0 0 24px rgba(255, 215, 0, 0.40);
  }
}

@keyframes star-pulse {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(12deg) scale(1.18); }
  100% { transform: rotate(0deg) scale(1); }
}

@keyframes orbit {
  0%   { transform: rotate(0deg) translateX(12px) rotate(0deg); }
  100% { transform: rotate(360deg) translateX(12px) rotate(-360deg); }
}

@media (prefers-reduced-motion: reduce) {
  .make67-page .m67-lb-item.top1 { animation: none; }
  .top1-star { animation: none; }
  .top1-star::after { animation: none; }
}

/* Danger button (red) for BANNED USERS */
.danger-btn {
  min-width: 160px;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid #7a1d1d;
  background: linear-gradient(180deg, rgba(255,72,72,0.18), rgba(255,72,72,0.10));
  color: #ffecec;
  font-weight: 900;
  letter-spacing: .3px;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(255,0,0,0.16), var(--shadow);
}
.danger-btn:hover {
  filter: brightness(1.08);
  box-shadow: 0 14px 30px rgba(255,0,0,0.22), var(--shadow);
}
.danger-btn:active { filter: brightness(0.95); }
.danger-btn:focus-visible { outline: 2px solid rgba(255,72,72,0.9); outline-offset: 2px; }

/* Banned users modal */
.m67-ban-root { position: fixed; inset: 0; z-index: 10015; display: block; }
.m67-ban-root[hidden] { display: none !important; }
.m67-ban-overlay { position: absolute; inset: 0; display: grid; place-items: center; }
.m67-ban__backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.55); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); }
.m67-ban__panel { position: relative; z-index: 1; width: min(92vw, 640px); max-height: min(86vh, 720px); overflow-y: auto; overflow-x: hidden; border-radius: 18px; padding: 18px; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.14); box-shadow: 0 24px 70px rgba(0,0,0,0.6); color: #e8ecf5; box-sizing: border-box; }
.m67-ban__title { margin: 6px 0 6px; text-align: center; font-size: 18px; font-weight: 900; letter-spacing: .3px; }
.m67-ban__subtitle { margin: 0 0 10px; text-align: center; font-size: 13px; color: var(--axis); }
.m67-ban__icon { width: 56px; height: 56px; display: grid; place-items: center; font-size: 34px; border-radius: 50%; margin: 0 auto 6px; background: radial-gradient(60% 60% at 40% 30%, #ffffffbb, #ffffff22), linear-gradient(180deg, rgba(255,72,72,0.35), rgba(255,72,72,0.18)); box-shadow: 0 8px 24px rgba(0,0,0,0.45), 0 0 0 2px rgba(255,255,255,0.10) inset; }
.m67-ban__close { position: absolute; top: 10px; right: 10px; border: 1px solid #3a3f47; background: #1c1f26; color: #e8ecf5; border-radius: 10px; padding: 6px 8px; cursor: pointer; }
.m67-ban__close:hover { filter: brightness(1.05); }

/* Generic modal (used for Inventory and Shop) */
.m67-modal-root { position: fixed; inset: 0; z-index: 10015; display: block; }
.m67-modal-root[hidden] { display: none !important; }
.m67-modal-overlay { position: absolute; inset: 0; display: grid; place-items: center; }
.m67-modal__backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.55); -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px); }
.m67-modal__panel { position: relative; z-index: 1; width: min(92vw, 760px); max-height: min(86vh, 780px); overflow-y: auto; overflow-x: hidden; scrollbar-gutter: stable both-edges; border-radius: 18px; padding: 18px; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.14); box-shadow: 0 24px 70px rgba(0,0,0,0.6); color: #e8ecf5; box-sizing: border-box; overscroll-behavior: contain; }
.m67-modal__title { margin: 4px 0 12px; text-align: center; font-size: 18px; font-weight: 900; letter-spacing: .3px; }
.m67-modal__close { position: absolute; top: 10px; right: 10px; border: 1px solid #3a3f47; background: #1c1f26; color: #e8ecf5; border-radius: 10px; padding: 6px 8px; cursor: pointer; }
.m67-modal__close:hover { filter: brightness(1.05); }
/* Prevent focus outline from causing any perceived size change */
.m67-modal__close:focus-visible { outline-offset: 2px; }

/* Shop grid: isolate paint so hover glows don't affect scroll metrics */
.m67-shop { contain: paint; }

/* === Make67 Regal Empowerment Themes & FX === */
/* Base variables (will be overridden by theme classes) */
.make67-page { --accent: #9fe3b5; --accent-2: #6ee7b7; --emp: 0; }

/* Theme palettes (color combos from brief) */
.make67-page.theme-elite { /* Black + Gold (Elite Authority) */
  --accent: #ffd700;
  --accent-2: #b8860b;
}
.make67-page.theme-mystic { /* Deep Purple + Electric Cyan (Mystic Royalty) */
  --accent: #7c3aed;
  --accent-2: #22d3ee;
}
.make67-page.theme-darkking { /* Crimson + Obsidian (Dark King Energy) */
  --accent: #ef4444;
  --accent-2: #0ea5e9; /* add subtle electric contrast */
}
.make67-page.theme-hero { /* Royal Blue + Platinum (Heroic Leader) */
  --accent: #4f46e5;
  --accent-2: #cfd3dc;
}
.make67-page.theme-tycoon { /* Emerald + Gold (Wealth + Control) */
  --accent: #22c55e;
  --accent-2: #f59e0b;
}

/* Auras around the board (subtle, slow) */
.make67-page .cards-grid::before {
  content: "";
  position: absolute;
  inset: -12%;
  border-radius: 24px;
  pointer-events: none;
  background:
    radial-gradient(40% 30% at 50% 25%, color-mix(in srgb, var(--accent) calc(30% + 50% * var(--emp)), transparent), transparent 70%),
    radial-gradient(30% 22% at 55% 70%, color-mix(in srgb, var(--accent-2) calc(18% + 36% * var(--emp)), transparent), transparent 70%);
  opacity: calc(0.08 + 0.45 * var(--emp));
  filter: blur(calc(16px + 32px * var(--emp)));
  animation: aura-breathe calc(12s - 7s * var(--emp)) ease-in-out infinite;
}
@keyframes aura-breathe {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.06); }
}

/* Reactive neon/glow borders on cards and op buttons (scaled by empowerment) */
.make67-page .card::after, .make67-page .op-btn::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  pointer-events: none;
  box-shadow:
    0 0 calc(16px + 38px * var(--emp)) color-mix(in srgb, var(--accent) 72%, transparent),
    0 0 calc(3px + 12px * var(--emp)) color-mix(in srgb, var(--accent-2) 55%, transparent) inset;
  opacity: 0;
  transition: opacity 180ms ease;
}
.make67-page .card:hover::after, .make67-page .card.selected::after, .make67-page .card.react-hit::after { opacity: calc(0.30 + 0.65 * var(--emp)); }
.make67-page .op-btn:hover::after, .make67-page .op-btn.active::after, .make67-page .op-btn.react-hit::after { opacity: calc(0.26 + 0.58 * var(--emp)); }

/* Always-on pulsing glow layer (dialed by empowerment) */
.make67-page .card::before,
.make67-page .op-btn::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  pointer-events: none;
  box-shadow:
    0 0 calc(10px + 30px * var(--emp)) color-mix(in srgb, var(--accent) 55%, transparent),
    0 0 calc(2px + 10px * var(--emp)) color-mix(in srgb, var(--accent-2) 40%, transparent) inset;
  opacity: calc(0.06 + 0.22 * var(--emp));
  animation: glowPulse calc(3.2s - 1.6s * var(--emp)) ease-in-out infinite;
}

/* Ambient pulsing under the board */
.make67-page .cards-grid::after {
  content: "";
  position: absolute;
  inset: -10%;
  border-radius: 24px;
  pointer-events: none;
  box-shadow:
    0 0 calc(30px + 60px * var(--emp)) color-mix(in srgb, var(--accent) 45%, transparent),
    0 0 calc(20px + 40px * var(--emp)) color-mix(in srgb, var(--accent-2) 35%, transparent) inset;
  opacity: calc(0.05 + 0.18 * var(--emp));
  animation: glowPulse calc(4.4s - 2.2s * var(--emp)) ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { opacity: calc(0.05 + 0.20 * var(--emp)); }
  50% { opacity: calc(0.22 + 0.60 * var(--emp)); }
}

/* Allâ€‘time rank charge bar under the score box */
.make67-page .score-box { position: relative; overflow: hidden; }
.make67-page .score-box.charged::before {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 4px;
  background: linear-gradient(90deg, rgba(255,255,255,0), var(--accent), var(--accent-2));
  transform-origin: left center;
  transform: scaleX(var(--charge, 0));
  filter: drop-shadow(0 0 14px color-mix(in srgb, var(--accent) 85%, transparent));
  transition: transform 600ms cubic-bezier(.2,.7,.2,1);
}
.make67-page .score-box.charge-burst::after {
  content: "";
  position: absolute;
  left: -20%; right: -20%; bottom: 0;
  height: 4px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), transparent);
  transform: translateX(-100%);
  animation: charge-skim 900ms ease forwards;
}
@keyframes charge-skim { to { transform: translateX(100%); opacity: 0; } }

/* Score sparks on increment */
.make67-page .score-box .spark {
  position: absolute;
  left: 50%; top: 50%;
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--accent);
  box-shadow: 0 0 14px color-mix(in srgb, var(--accent) 85%, transparent);
  transform: translate(-50%, -50%);
  animation: spark 700ms ease-out forwards;
}
@keyframes spark {
  to {
    transform: translate(calc(-50% + var(--dx, 0px)), calc(-50% + var(--dy, -32px))) scale(0.85);
    opacity: 0;
  }
}

/* Prefer reduced motion: soften or disable thematic animations */
@media (prefers-reduced-motion: reduce) {
  .make67-page .cards-grid::before { animation: none; }
  .make67-page .cards-grid::after { animation: none; }
  .make67-page .card::before, .make67-page .op-btn::before { animation: none; }
  .make67-page .score-box.charge-burst::after { animation: none; }
  .make67-page .score-box .spark { animation-duration: 1ms; }
}

/* Slight pulsing accent for success overlay glow */
.m67-overlay__glow {
  animation: glowPulse 3.6s ease-in-out infinite;
}

/* === Make67 Split Layout (Game UI Modernization) === */
.make67-page .split-layout {
  display: grid;
  grid-template-columns: 1fr 2fr; /* 1/3 + 2/3 split */
  height: calc(100vh - var(--header-h, 120px));
  overflow: hidden;
  background: #0f1014;
}

/* Left Panel */
.make67-page .panel-left {
  background: #15171e;
  border-right: 1px solid rgba(255,255,255,0.1);
  display: flex;
  flex-direction: column;
  padding: 20px;
  overflow-y: auto;
}
.make67-page .stats-hud {
  background: rgba(255,255,255,0.05);
  border-radius: 16px;
  padding: 15px;
  margin-bottom: 20px;
}
.make67-page .stat-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.make67-page .stat-item { display: flex; justify-content: space-between; align-items: center; font-weight: 800; font-size: 1.1rem; padding: 8px 10px; border: 1px solid var(--cell-border); border-radius: 12px; background: #1a1c23; }
.make67-page .stat-item.gold { color: #ffd700; }
.make67-page .stat-item .label { color: var(--axis); font-weight: 700; }
.make67-page .stat-item .value { font-weight: 900; }
.make67-page .effects-bar { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; color: #ccd1db; opacity: .9; font-size: 13px; }

.make67-page .leaderboard-container { flex: 1; display: flex; flex-direction: column; min-height: 0; }
.make67-page .lb-header { margin: 6px 2px 10px; font-size: 14px; font-weight: 800; color: var(--axis); letter-spacing: .3px; }
.make67-page .lb-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 6px; }
.make67-page .panel-footer { margin-top: 16px; display: flex; justify-content: center; }
.make67-page .text-link { background: transparent; border: 0; color: #9ab4ff; text-decoration: underline; cursor: pointer; opacity: .9; }
.make67-page .text-link:hover { opacity: 1; }

/* Right Panel */
.make67-page .panel-right {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at center, #1b1c22 0%, #0a0b0e 100%);
}
.make67-page .game-board-wrapper { position: relative; padding: 40px; }
.make67-page .shoulder-btn {
  position: absolute;
  top: 0;
  width: 40px; height: 40px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.4);
  background: rgba(20, 24, 30, 0.85);
  -webkit-backdrop-filter: blur(8px) saturate(1.2);
  backdrop-filter: blur(8px) saturate(1.2);
  color: #e8f0ff;
  cursor: pointer;
  font-weight: 800;
  font-size: 20px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5), 0 0 0 2px rgba(255,255,255,0.08) inset;
  z-index: 10;
  transition: transform 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
}
.make67-page .shoulder-btn:hover {
  background: rgba(30, 34, 42, 0.92);
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,0.6), 0 0 0 2px rgba(255,255,255,0.14) inset;
}
.make67-page .shoulder-btn.left { left: 0; }
.make67-page .shoulder-btn.right { right: 0; }

/* Bottom Dock */
.make67-page .game-dock {
  position: absolute;
  bottom: 30px;
  display: flex;
  gap: 16px;
  padding: 12px 24px;
  background: rgba(20, 24, 30, 0.75); /* 75% "rendered" per request */
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border-radius: 24px;
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
}
.make67-page .dock-btn { appearance: none; background: transparent; border: 1px solid rgba(255,255,255,0.16); color: #e8ecf5; border-radius: 14px; padding: 8px 12px; font-size: 20px; cursor: pointer; }
.make67-page .dock-btn:hover { filter: brightness(1.08); }

/* Header right container to align dock left of auth info */
.make67-page .header-right {
  position: absolute;
  right: 16px;
  top: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.make67-page .header .game-dock.header-dock {
  position: static;
  bottom: auto;
  padding: 8px 14px;
  gap: 12px;
  border-radius: 16px;
  /* Black at 75% opacity (25% transparency) â€” mostly opaque */
  background: rgba(0, 0, 0, 0.75);
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 6px 18px rgba(0,0,0,0.35), 0 0 0 1px rgba(255,255,255,0.05) inset;
  position: relative;
  z-index: 10;
}
/* Auth actions inside header-right should not be absolutely positioned */
.make67-page .header .auth-actions {
  position: relative;
  right: auto;
  top: auto;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 12px;
  /* Black at 75% opacity (25% transparency) â€” mostly opaque */
  background: rgba(0, 0, 0, 0.75);
  /* remove frosted-glass so it's truly opaque */
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 6px 18px rgba(0,0,0,0.35), 0 0 0 1px rgba(255,255,255,0.05) inset;
  z-index: 10;
}

/* Make the auth buttons readable like shoulder buttons on this page */
.make67-page .header .auth-actions .google-login-btn,
.make67-page .header .auth-actions .logout-btn {
  /* Black at 75% opacity (25% transparency) â€” mostly opaque */
  background: rgba(0, 0, 0, 0.75);
  border: 1px solid rgba(255,255,255,0.16);
  color: #e8f0ff;
  border-radius: 10px;
  padding: 6px 10px;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.06) inset;
}
.make67-page .header .auth-actions .google-login-btn:hover,
.make67-page .header .auth-actions .logout-btn:hover {
  background: rgba(0, 0, 0, 0.75);
}

/* Improve text/icon contrast inside the frosted pill */
.make67-page .header .auth-actions .user-name { color: #e3e8f3; opacity: .95; }
.make67-page .header .auth-actions .avatar { box-shadow: 0 0 0 1px rgba(255,255,255,0.35); }

/* Chat overlay (glass) */
.make67-page .glass-overlay { position: absolute; inset: 0; display: grid; place-items: center; z-index: 50; }
.make67-page .glass-overlay[hidden] { display: none !important; }
.make67-page .glass-panel {
  width: min(92vw, 720px);
  max-height: min(86vh, 760px);
  overflow: auto;
  border-radius: 18px;
  padding: 14px;
  color: #e8ecf5;
  background:
    radial-gradient(1200px 800px at 50% -20%, rgba(255,255,255,0.08), rgba(255,255,255,0.02)),
    linear-gradient(180deg, rgba(30,32,40,0.9), rgba(18,20,26,0.96));
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 24px 70px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.06) inset;
}

/* --- Seasonal (Xmas) decorations for Make67 --- */
.snow-canvas {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 1; /* Keep below primary UI, above page background */
}

.xmas-title {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.xmas-title .xmas-emoji {
  filter: drop-shadow(0 0 6px rgba(255, 100, 100, 0.55));
}

/* Garland strip with twinkling bulbs */
.xmas-garland {
  position: absolute;
  left: 0;
  right: 0;
  height: 34px;
  pointer-events: none;
  mix-blend-mode: screen;
  z-index: 4; /* ensure lights sit above borders/outlines */
}
.garland-header { top: 0; }
.garland-board { top: -8px; }

.xmas-garland::before {
  content: "";
  position: absolute;
  inset: 0;
  /* cable */
  background:
    linear-gradient(#1c2a2f, #1c2a2f) center 10px / 100% 3px no-repeat,
    /* bulbs (solid cores) */
    radial-gradient(circle, rgba(255,85,85,.95) 0 6px, transparent 7px) 0 0/48px 32px repeat-x,
    radial-gradient(circle, rgba(255,240,120,.95) 0 6px, transparent 7px) 16px 10px/48px 32px repeat-x,
    radial-gradient(circle, rgba(120,235,180,.95) 0 6px, transparent 7px) 32px 0/48px 32px repeat-x,
    radial-gradient(circle, rgba(140,180,255,.95) 0 6px, transparent 7px) 8px 18px/48px 32px repeat-x,
    /* colored glow halos matching each bulb color */
    radial-gradient(circle, rgba(255,85,85,.40) 0 9px, rgba(255,85,85,.18) 16px, rgba(255,85,85,0) 26px) 0 0/48px 32px repeat-x,
    radial-gradient(circle, rgba(255,240,120,.40) 0 9px, rgba(255,240,120,.18) 16px, rgba(255,240,120,0) 26px) 16px 10px/48px 32px repeat-x,
    radial-gradient(circle, rgba(120,235,180,.38) 0 9px, rgba(120,235,180,.16) 16px, rgba(120,235,180,0) 26px) 32px 0/48px 32px repeat-x,
    radial-gradient(circle, rgba(140,180,255,.38) 0 9px, rgba(140,180,255,.16) 16px, rgba(140,180,255,0) 26px) 8px 18px/48px 32px repeat-x;
  animation: bulbsTwinkle 2.6s ease-in-out infinite;
  /* remove white drop shadow so the glow matches bulb colors */
  filter: none;
}

@keyframes bulbsTwinkle {
  0%, 100% { opacity: .85; }
  50% { opacity: .55; }
}

/* Slightly desynchronize header/board twinkle for a more natural effect */
.garland-header::before { animation-duration: 2.8s; animation-delay: .15s; }
.garland-board::before { animation-duration: 3.2s; animation-delay: 1.1s; }

/* Slight festive focus around the game board */
.make67-page .game-board-wrapper {
  position: relative;
}
.make67-page .game-board-wrapper::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: 18px;
  pointer-events: none;
  box-shadow: 0 0 0 2px rgba(255,255,255,0.05), 0 0 22px rgba(255, 60, 60, 0.18), 0 0 38px rgba(80, 200, 120, 0.18);
  z-index: 1; /* keep this glow behind the garland */
}

/* Mobile */
@media (max-width: 768px) {
  /* Header Cleanup */
  .make67-page .header { padding: 10px 12px 8px; }
  .make67-page .title { font-size: 18px; margin: 4px 0; }
  .make67-page .subtitle { font-size: 12px; margin-top: 2px; }
  .make67-page .xmas-emoji { font-size: 16px; }

  /* Hide back link and make6or7 button on mobile */
  .make67-page .back-link,
  .make67-page .make67-btn { display: none; }

  /* Consolidate header-right elements */
  .make67-page .header-right {
    position: static;
    justify-content: center;
    gap: 8px;
    margin-top: 8px;
    flex-wrap: wrap;
  }

  /* Simplify auth display - avatar only */
  .make67-page .user-name { display: none; }
  .make67-page .avatar { width: 32px; height: 32px; }

  /* Dock buttons smaller, better spacing */
  .make67-page .header .game-dock.header-dock {
    padding: 6px 10px;
    gap: 8px;
    border-radius: 12px;
  }
  .make67-page .dock-btn {
    padding: 6px 10px;
    font-size: 18px;
    min-width: 40px;
    min-height: 40px;
  }

  /* Split layout adjustments */
  .make67-page .split-layout {
    display: block;
    height: calc(100vh - var(--header-h, 100px));
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }
  .make67-page .panel-left { display: none; }
  .make67-page .panel-left.mobile-visible {
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    z-index: 200;
    width: 85vw;
    max-width: 320px;
    box-shadow: 4px 0 24px rgba(0,0,0,0.6);
  }
  .make67-page .panel-left.mobile-visible::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: -1;
    -webkit-backdrop-filter: blur(4px);
    backdrop-filter: blur(4px);
  }

  .make67-page .panel-right {
    height: calc(100vh - var(--header-h, 100px));
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }
  .make67-page .mobile-only { display: inline-flex; }

  /* Game board sizing improvements */
  .make67-page .game-board-wrapper { padding: 20px 16px; }
  .make67-page .cards-grid {
    grid-template-columns: repeat(2, minmax(140px, 46vw));
    grid-auto-rows: minmax(140px, 46vw);
    gap: 12px;
  }
  .make67-page .card { font-size: clamp(40px, 10vw, 56px); }

  /* Move shoulder buttons below title, not overlapping board */
  .make67-page .shoulder-btn {
    position: static;
    width: 36px;
    height: 36px;
    margin: 0 4px;
  }

  /* Operation buttons better grid */
  .make67-page .ops { gap: 8px; margin-top: 12px; }
  .make67-page .op-btn {
    min-width: 56px;
    min-height: 56px;
    font-size: 22px;
  }

  /* Stats single column */
  .make67-page .stat-row { grid-template-columns: 1fr; gap: 8px; }

  /* Chat overlay mobile fixes */
  .make67-page .glass-panel {
    width: 96vw;
    max-height: 75vh;
    padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px));
  }
  .make67-page .m67-chat__log { max-height: 45vh; }
}
@media (min-width: 769px) {
  .make67-page .mobile-only { display: none; }
}

/* --- Snowballs feature --- */
.snowball-pile {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 14px;
  display: flex;
  align-items: flex-end;
  gap: 6px;
  z-index: 500;
  pointer-events: auto;
}
.snowball {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ffffff, #e8f1f9 55%, #d9e6f2 70%, rgba(200,220,240,0.85) 100%);
  box-shadow: 0 2px 6px rgba(0,0,0,0.35), inset 0 1px 3px rgba(255,255,255,0.9);
  border: 1px solid rgba(255,255,255,0.65);
  cursor: grab;
  transition: transform .15s ease, filter .15s ease;
}
.snowball:active { cursor: grabbing; }
.snowball.s1 { transform: translateY(10px) scale(0.95); opacity: .9; }
.snowball.s2 { transform: translateY(4px) scale(1.0); }
.snowball.s3 { transform: translateY(0) scale(1.05); }
.snowball:hover { filter: brightness(1.08) saturate(1.05); }

/* Cursor helper when holding a snowball */
body.holding-snowball { cursor: none; }
.snowball-cursor {
  position: fixed; left: 0; top: 0; width: 22px; height: 22px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ffffff, #e8f1f9 55%, #d9e6f2 70%, rgba(200,220,240,0.85) 100%);
  box-shadow: 0 2px 6px rgba(0,0,0,0.35), inset 0 1px 3px rgba(255,255,255,0.9);
  border: 1px solid rgba(255,255,255,0.65);
  pointer-events: none; z-index: 600; transform: translate(-50%, -50%);
}

/* Local explosion effect */
.snow-explosion {
  position: fixed; width: 10px; height: 10px; left: 0; top: 0; pointer-events: none; z-index: 550;
  background: radial-gradient(circle, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 35%, rgba(255,255,255,0.0) 70%);
  border-radius: 50%; opacity: 0; transform: translate(-50%, -50%) scale(0.6);
  animation: snow-pop .8s ease-out forwards;
}
@keyframes snow-pop {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.4); filter: blur(0px); }
  15% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); filter: blur(0.5px); }
  60% { opacity: .9; transform: translate(-50%, -50%) scale(1.8); filter: blur(1px); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(2.2); filter: blur(1.5px); }
}

/* Fullscreen splat when hit */
.splat-overlay {
  position: fixed; inset: 0; pointer-events: none; z-index: 800;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.95) 6%, rgba(255,255,255,0.85) 28%, rgba(255,255,255,0.38) 50%, rgba(255,255,255,0.0) 70%);
  animation: splat-fade 1s ease-out forwards;
}
@keyframes splat-fade {
  0% { opacity: 0; }
  10% { opacity: 1; }
  70% { opacity: 1; }
  100% { opacity: 0; }
}
